language: cpp
sudo: required
branches:
  only:
    - master

matrix:
  include:
    - os: linux
      compiler: gcc
      install: 
        - cmake --version
      script: 
        - cmake . -DBUILD_SHARED_LIBS=ON -DBUILD_TESTS=ON
        - make

    - os: linux
      compiler: gcc
      install: 
        - cmake --version
      script: 
        - cmake . -DBUILD_SHARED_LIBS=OFF -DBUILD_TESTS=ON
        - make
        
    - os: windows
      install: 
        - cmake --version
      script: 
        - cmake.exe -G "Visual Studio 15 2017" -DBUILD_SHARED_LIBS=ON -DBUILD_TESTS=ON -S .
        - cmake.exe --build . --config Debug
        - cmake.exe --build . --config Release
        
    - os: windows
      install: 
        - cmake --version
      script: 
        - cmake.exe -G "Visual Studio 15 2017" -DBUILD_SHARED_LIBS=OFF -DBUILD_TESTS=ON -S .
        - cmake.exe --build . --config Debug
        - cmake.exe --build . --config Release
        
    - os: linux
      compiler: gcc
      install: 
        - cmake --version
      script: 
        - cmake . -DBUILD_SHARED_LIBS=OFF
        - make

    - os: osx
      osx_image: xcode10
      env:
        - MATRIX_EVAL="brew upgrade && brew install gcc6 && CC=gcc-6 && CXX=g++-6"
      before_install:
        - eval "${MATRIX_EVAL}"
      install: 
        - cmake --version
      script: 
        - cmake . -DBUILD_SHARED_LIBS=ON
        - make
        
    - os: osx
      osx_image: xcode10
      env:
        - MATRIX_EVAL="brew upgrade && brew install gcc9 && CC=gcc-9 && CXX=g++-9"
      before_install:
        - eval "${MATRIX_EVAL}"
      install: 
        - cmake --version
      script: 
        - cmake . -DBUILD_SHARED_LIBS=OFF
        - make

notifications:
  email: false
